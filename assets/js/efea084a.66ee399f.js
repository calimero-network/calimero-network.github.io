"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2185],{34434:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"developer-tools/merobox/auth-service-integration","title":"Authentication Service Integration","description":"Advanced authentication service configuration and integration for Merobox.","source":"@site/docs/05-developer-tools/merobox/auth-service-integration.mdx","sourceDirName":"05-developer-tools/merobox","slug":"/developer-tools/merobox/auth-service-integration","permalink":"/developer-tools/merobox/auth-service-integration","draft":false,"unlisted":false,"editUrl":"https://github.com/calimero-network/calimero-network.github.io/edit/master/docs/05-developer-tools/merobox/auth-service-integration.mdx","tags":[],"version":"current","lastUpdatedAt":1757931844000,"sidebarPosition":7.4,"frontMatter":{"title":"Authentication Service Integration","description":"Advanced authentication service configuration and integration for Merobox.","sidebar_position":7.4},"sidebar":"tutorialSidebar","previous":{"title":"Network Configuration","permalink":"/developer-tools/merobox/network-configuration"},"next":{"title":"Workflow Advanced Features","permalink":"/developer-tools/merobox/workflow-advanced-features"}}');var a=i(86070),r=i(48854);const o={title:"Authentication Service Integration",description:"Advanced authentication service configuration and integration for Merobox.",sidebar_position:7.4},s="Authentication Service Integration",l={},c=[{value:"Advanced Auth Configuration",id:"advanced-auth-configuration",level:2},{value:"Auth Service Environment Variables",id:"auth-service-environment-variables",level:3},{value:"Database Configuration",id:"database-configuration",level:3},{value:"Custom Auth Middleware",id:"custom-auth-middleware",level:2},{value:"Middleware Configuration Options",id:"middleware-configuration-options",level:3},{value:"Traefik Configuration",id:"traefik-configuration",level:2},{value:"SSL/TLS Configuration",id:"ssltls-configuration",level:3},{value:"OAuth Integration",id:"oauth-integration",level:2},{value:"OAuth Provider Configuration",id:"oauth-provider-configuration",level:3},{value:"OAuth Flow Configuration",id:"oauth-flow-configuration",level:3},{value:"JWT Configuration",id:"jwt-configuration",level:2},{value:"JWT Token Settings",id:"jwt-token-settings",level:3},{value:"JWT Validation",id:"jwt-validation",level:3},{value:"Session Management",id:"session-management",level:2},{value:"Session Configuration",id:"session-configuration",level:3},{value:"Session Security",id:"session-security",level:3},{value:"Multi-Tenant Configuration",id:"multi-tenant-configuration",level:2},{value:"Tenant Management",id:"tenant-management",level:3},{value:"Tenant-Specific Configuration",id:"tenant-specific-configuration",level:3},{value:"Monitoring and Logging",id:"monitoring-and-logging",level:2},{value:"Auth Service Monitoring",id:"auth-service-monitoring",level:3},{value:"Logging Configuration",id:"logging-configuration",level:3},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"Security Headers",id:"security-headers",level:3},{value:"Rate Limiting",id:"rate-limiting",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Debug Configuration",id:"debug-configuration",level:3},{value:"Next Steps",id:"next-steps",level:2}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"authentication-service-integration",children:"Authentication Service Integration"})}),"\n",(0,a.jsx)(n.p,{children:"This guide covers advanced authentication service configuration, custom\nmiddleware, and integration patterns for Merobox."}),"\n",(0,a.jsx)(n.h2,{id:"advanced-auth-configuration",children:"Advanced Auth Configuration"}),"\n",(0,a.jsx)(n.p,{children:"Configure authentication service with custom settings:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# workflow.yml\nauth_service: true\nauth_config:\n  image: ghcr.io/calimero-network/mero-auth:latest\n  environment:\n    AUTH_SECRET_KEY: 'your-secret-key'\n    AUTH_SESSION_TIMEOUT: '3600'\n  volumes:\n    - ./auth-config:/app/config\n  networks:\n    - calimero-web\n    - calimero-internal\n"})}),"\n",(0,a.jsx)(n.h3,{id:"auth-service-environment-variables",children:"Auth Service Environment Variables"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# Complete auth service configuration\nauth_service:\n  image: ghcr.io/calimero-network/mero-auth:latest\n  environment:\n    # Core configuration\n    AUTH_SECRET_KEY: 'your-secret-key'\n    AUTH_SESSION_TIMEOUT: '3600'\n    AUTH_DATABASE_URL: 'postgresql://user:pass@localhost/auth'\n\n    # Security settings\n    AUTH_ENCRYPTION_KEY: 'your-encryption-key'\n    AUTH_JWT_SECRET: 'your-jwt-secret'\n    AUTH_BCRYPT_ROUNDS: '12'\n\n    # Session management\n    AUTH_SESSION_COOKIE_NAME: 'calimero_session'\n    AUTH_SESSION_DOMAIN: '.calimero.local'\n    AUTH_SESSION_SECURE: 'true'\n    AUTH_SESSION_HTTP_ONLY: 'true'\n    AUTH_SESSION_SAME_SITE: 'strict'\n"})}),"\n",(0,a.jsx)(n.h3,{id:"database-configuration",children:"Database Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# Auth service database setup\nauth_service:\n  database:\n    type: postgresql\n    host: postgres\n    port: 5432\n    name: calimero_auth\n    username: auth_user\n    password: auth_password\n    ssl: true\n    ssl_mode: require\n    pool_size: 10\n    max_connections: 100\n"})}),"\n",(0,a.jsx)(n.h2,{id:"custom-auth-middleware",children:"Custom Auth Middleware"}),"\n",(0,a.jsx)(n.p,{children:"Configure custom authentication middleware:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"auth_service:\n  middleware:\n    - name: cors\n      config:\n        origins: ['http://localhost:3000', 'https://myapp.com']\n        methods: ['GET', 'POST', 'PUT', 'DELETE']\n        headers: ['Content-Type', 'Authorization']\n        credentials: true\n    - name: rate-limit\n      config:\n        requests_per_minute: 100\n        burst_size: 200\n        window_size: 60\n    - name: custom-auth\n      config:\n        auth_endpoint: '/custom/auth'\n        token_header: 'X-Auth-Token'\n        refresh_endpoint: '/custom/refresh'\n"})}),"\n",(0,a.jsx)(n.h3,{id:"middleware-configuration-options",children:"Middleware Configuration Options"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# Advanced middleware configuration\nauth_service:\n  middleware:\n    # CORS middleware\n    - name: cors\n      config:\n        origins: ['https://app.calimero.com']\n        methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS']\n        headers: ['Content-Type', 'Authorization', 'X-Requested-With']\n        credentials: true\n        max_age: 86400\n\n    # Rate limiting\n    - name: rate-limit\n      config:\n        requests_per_minute: 1000\n        burst_size: 2000\n        window_size: 60\n        key_by: 'ip' # ip, user, custom\n\n    # Authentication\n    - name: auth\n      config:\n        required: true\n        token_type: 'bearer'\n        token_header: 'Authorization'\n        refresh_token_header: 'X-Refresh-Token'\n\n    # Logging\n    - name: logging\n      config:\n        level: 'info'\n        format: 'json'\n        fields: ['method', 'path', 'status', 'duration']\n\n    # Metrics\n    - name: metrics\n      config:\n        enabled: true\n        endpoint: '/metrics'\n        labels: ['method', 'path', 'status']\n"})}),"\n",(0,a.jsx)(n.h2,{id:"traefik-configuration",children:"Traefik Configuration"}),"\n",(0,a.jsx)(n.p,{children:"Custom Traefik proxy configuration for auth service:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"traefik:\n  image: traefik:v2.10\n  config:\n    entryPoints:\n      web:\n        address: ':80'\n        http:\n          redirections:\n            entrypoint:\n              to: websecure\n              scheme: https\n      websecure:\n        address: ':443'\n        http:\n          tls:\n            options: default\n    providers:\n      docker:\n        endpoint: 'unix:///var/run/docker.sock'\n        exposedByDefault: false\n        network: calimero-web\n    api:\n      dashboard: true\n      insecure: false\n      auth:\n        basic:\n          admin: '$2y$10$...' # bcrypt hash\n    certificatesResolvers:\n      letsencrypt:\n        acme:\n          email: admin@calimero.com\n          storage: /acme.json\n          httpChallenge:\n            entryPoint: web\n"})}),"\n",(0,a.jsx)(n.h3,{id:"ssltls-configuration",children:"SSL/TLS Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# SSL/TLS configuration\ntraefik:\n  config:\n    tls:\n      options:\n        default:\n          sslProtocols:\n            - 'TLSv1.2'\n            - 'TLSv1.3'\n          cipherSuites:\n            - 'TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384'\n            - 'TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305'\n          minVersion: 'VersionTLS12'\n          maxVersion: 'VersionTLS13'\n"})}),"\n",(0,a.jsx)(n.h2,{id:"oauth-integration",children:"OAuth Integration"}),"\n",(0,a.jsx)(n.h3,{id:"oauth-provider-configuration",children:"OAuth Provider Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# OAuth provider setup\nauth_service:\n  oauth:\n    providers:\n      - name: google\n        client_id: '${GOOGLE_CLIENT_ID}'\n        client_secret: '${GOOGLE_CLIENT_SECRET}'\n        redirect_uri: 'https://auth.calimero.com/oauth/google/callback'\n        scopes: ['openid', 'email', 'profile']\n      - name: github\n        client_id: '${GITHUB_CLIENT_ID}'\n        client_secret: '${GITHUB_CLIENT_SECRET}'\n        redirect_uri: 'https://auth.calimero.com/oauth/github/callback'\n        scopes: ['user:email']\n      - name: microsoft\n        client_id: '${MICROSOFT_CLIENT_ID}'\n        client_secret: '${MICROSOFT_CLIENT_SECRET}'\n        redirect_uri: 'https://auth.calimero.com/oauth/microsoft/callback'\n        scopes: ['openid', 'email', 'profile']\n"})}),"\n",(0,a.jsx)(n.h3,{id:"oauth-flow-configuration",children:"OAuth Flow Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# OAuth flow settings\nauth_service:\n  oauth:\n    flow:\n      authorization_code:\n        enabled: true\n        code_challenge_method: 'S256'\n        state_parameter: true\n      implicit:\n        enabled: false\n      client_credentials:\n        enabled: true\n        token_endpoint: '/oauth/token'\n      refresh_token:\n        enabled: true\n        rotation: true\n        lifetime: 86400 # 24 hours\n"})}),"\n",(0,a.jsx)(n.h2,{id:"jwt-configuration",children:"JWT Configuration"}),"\n",(0,a.jsx)(n.h3,{id:"jwt-token-settings",children:"JWT Token Settings"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# JWT configuration\nauth_service:\n  jwt:\n    secret: '${JWT_SECRET}'\n    algorithm: 'HS256' # HS256, HS384, HS512, RS256, RS384, RS512\n    access_token:\n      lifetime: 3600 # 1 hour\n      issuer: 'calimero-auth'\n      audience: 'calimero-api'\n    refresh_token:\n      lifetime: 86400 # 24 hours\n      issuer: 'calimero-auth'\n      audience: 'calimero-api'\n    claims:\n      - name: 'sub'\n        required: true\n      - name: 'iat'\n        required: true\n      - name: 'exp'\n        required: true\n      - name: 'iss'\n        required: true\n      - name: 'aud'\n        required: true\n"})}),"\n",(0,a.jsx)(n.h3,{id:"jwt-validation",children:"JWT Validation"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# JWT validation settings\nauth_service:\n  jwt:\n    validation:\n      clock_skew: 30 # seconds\n      require_exp: true\n      require_iat: true\n      require_nbf: false\n      leeway: 60 # seconds\n    blacklist:\n      enabled: true\n      storage: redis\n      ttl: 86400 # 24 hours\n"})}),"\n",(0,a.jsx)(n.h2,{id:"session-management",children:"Session Management"}),"\n",(0,a.jsx)(n.h3,{id:"session-configuration",children:"Session Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# Session management\nauth_service:\n  session:\n    store: redis # memory, redis, postgresql\n    config:\n      redis:\n        host: redis\n        port: 6379\n        password: '${REDIS_PASSWORD}'\n        db: 0\n        ttl: 3600\n    cookie:\n      name: 'calimero_session'\n      domain: '.calimero.local'\n      path: '/'\n      secure: true\n      http_only: true\n      same_site: 'strict'\n      max_age: 3600\n"})}),"\n",(0,a.jsx)(n.h3,{id:"session-security",children:"Session Security"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# Session security settings\nauth_service:\n  session:\n    security:\n      regenerate_id: true\n      rotate_tokens: true\n      max_concurrent_sessions: 5\n      ip_validation: true\n      user_agent_validation: true\n    encryption:\n      enabled: true\n      algorithm: 'AES-256-GCM'\n      key: '${SESSION_ENCRYPTION_KEY}'\n"})}),"\n",(0,a.jsx)(n.h2,{id:"multi-tenant-configuration",children:"Multi-Tenant Configuration"}),"\n",(0,a.jsx)(n.h3,{id:"tenant-management",children:"Tenant Management"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# Multi-tenant setup\nauth_service:\n  multi_tenant:\n    enabled: true\n    tenant_resolution:\n      strategy: 'subdomain' # subdomain, path, header\n      header_name: 'X-Tenant-ID'\n      default_tenant: 'default'\n    tenant_isolation:\n      database: true\n      cache: true\n      sessions: true\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tenant-specific-configuration",children:"Tenant-Specific Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# Per-tenant configuration\nauth_service:\n  tenants:\n    - name: 'tenant1'\n      config:\n        auth_methods: ['password', 'oauth']\n        oauth_providers: ['google', 'github']\n        session_timeout: 7200\n    - name: 'tenant2'\n      config:\n        auth_methods: ['oauth']\n        oauth_providers: ['microsoft']\n        session_timeout: 3600\n"})}),"\n",(0,a.jsx)(n.h2,{id:"monitoring-and-logging",children:"Monitoring and Logging"}),"\n",(0,a.jsx)(n.h3,{id:"auth-service-monitoring",children:"Auth Service Monitoring"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# Monitoring configuration\nauth_service:\n  monitoring:\n    enabled: true\n    metrics:\n      - authentication_attempts\n      - authentication_successes\n      - authentication_failures\n      - session_creations\n      - session_destructions\n      - token_issuances\n      - token_validations\n    alerts:\n      - metric: authentication_failures\n        threshold: 100\n        window: 300\n        action: alert\n      - metric: session_creations\n        threshold: 1000\n        window: 60\n        action: scale_up\n"})}),"\n",(0,a.jsx)(n.h3,{id:"logging-configuration",children:"Logging Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# Logging setup\nauth_service:\n  logging:\n    level: 'info'\n    format: 'json'\n    fields:\n      - timestamp\n      - level\n      - message\n      - user_id\n      - tenant_id\n      - request_id\n    outputs:\n      - stdout\n      - file: /var/log/auth-service.log\n      - syslog: udp://syslog:514\n"})}),"\n",(0,a.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,a.jsx)(n.h3,{id:"security-headers",children:"Security Headers"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# Security headers\nauth_service:\n  security_headers:\n    - name: 'X-Content-Type-Options'\n      value: 'nosniff'\n    - name: 'X-Frame-Options'\n      value: 'DENY'\n    - name: 'X-XSS-Protection'\n      value: '1; mode=block'\n    - name: 'Strict-Transport-Security'\n      value: 'max-age=31536000; includeSubDomains'\n    - name: 'Content-Security-Policy'\n      value: \"default-src 'self'\"\n"})}),"\n",(0,a.jsx)(n.h3,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# Advanced rate limiting\nauth_service:\n  rate_limiting:\n    global:\n      requests_per_minute: 1000\n      burst_size: 2000\n    endpoints:\n      - path: '/auth/login'\n        requests_per_minute: 10\n        burst_size: 20\n      - path: '/auth/register'\n        requests_per_minute: 5\n        burst_size: 10\n      - path: '/oauth/*'\n        requests_per_minute: 100\n        burst_size: 200\n"})}),"\n",(0,a.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,a.jsx)(n.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Check auth service status\ndocker logs calimero-auth-service\n\n# Test authentication\ncurl -X POST http://localhost:8080/auth/login \\\n  -H "Content-Type: application/json" \\\n  -d \'{"username": "test", "password": "test"}\'\n\n# Check database connectivity\ndocker exec calimero-auth-service psql -h postgres -U auth_user -d calimero_auth -c "SELECT 1;"\n\n# Verify JWT tokens\ncurl -H "Authorization: Bearer <token>" http://localhost:8080/auth/verify\n'})}),"\n",(0,a.jsx)(n.h3,{id:"debug-configuration",children:"Debug Configuration"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# Debug mode\nauth_service:\n  debug:\n    enabled: true\n    log_level: 'debug'\n    trace_requests: true\n    trace_responses: true\n    profile_requests: true\n"})}),"\n",(0,a.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,a.jsx)(n.p,{children:"Now that you understand authentication service integration:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"./workflow-advanced-features",children:"Workflow Advanced Features"})," - Advanced workflow\ncapabilities"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"./testing-framework-integration",children:"Testing Framework Integration"})," - Testing\nwith Merobox"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"./resource-management",children:"Resource Management"})," - Resource limits and monitoring"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"./advanced-configuration",children:"Advanced Configuration"})," - Other advanced features"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},48854:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>s});var t=i(30758);const a={},r=t.createContext(a);function o(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);