"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7962],{56192:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>a});var t=i(30758);const s={},l=t.createContext(s);function r(e){const n=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(l.Provider,{value:n},e.children)}},96906:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"tutorials/login-with-wallets/starknet-wallet","title":"Starknet Wallet","description":"Logging in with Starknet","source":"@site/versioned_docs/version-0.4.0/06-tutorials/01-login-with-wallets/02-starknet-wallet.mdx","sourceDirName":"06-tutorials/01-login-with-wallets","slug":"/tutorials/login-with-wallets/starknet-wallet","permalink":"/0.4.0/tutorials/login-with-wallets/starknet-wallet","draft":false,"unlisted":false,"editUrl":"https://github.com/calimero-network/calimero-network.github.io/edit/master/versioned_docs/version-0.4.0/06-tutorials/01-login-with-wallets/02-starknet-wallet.mdx","tags":[],"version":"0.4.0","lastUpdatedAt":1747046863000,"sidebarPosition":2,"frontMatter":{"id":"starknet-wallet","title":"Starknet Wallet"},"sidebar":"tutorialSidebar","previous":{"title":"Near Wallet","permalink":"/0.4.0/tutorials/login-with-wallets/near-wallet"},"next":{"title":"ICP Wallet","permalink":"/0.4.0/tutorials/login-with-wallets/icp-wallet"}}');var s=i(86070),l=i(56192);const r={id:"starknet-wallet",title:"Starknet Wallet"},a=void 0,o={},h=[{value:"Logging in with Starknet",id:"logging-in-with-starknet",level:2},{value:"1. User Initiates Login",id:"1-user-initiates-login",level:3},{value:"2. Wallet Selection",id:"2-wallet-selection",level:3},{value:"3. Wallet Connection",id:"3-wallet-connection",level:3},{value:"For ArgentX:",id:"for-argentx",level:4},{value:"For Metamask Snap:",id:"for-metamask-snap",level:4},{value:"4. Server Issues Challenge",id:"4-server-issues-challenge",level:3},{value:"5. User Signs Challenge",id:"5-user-signs-challenge",level:3},{value:"6. Signature Sent to Backend",id:"6-signature-sent-to-backend",level:3},{value:"7. Signature Verification",id:"7-signature-verification",level:3},{value:"For ArgentX Wallets:",id:"for-argentx-wallets",level:4},{value:"For Metamask Snap:",id:"for-metamask-snap-1",level:4},{value:"Final Steps:",id:"final-steps",level:4},{value:"8. Successful Login",id:"8-successful-login",level:3}];function c(e){const n={code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"logging-in-with-starknet",children:"Logging in with Starknet"}),"\n",(0,s.jsx)(n.p,{children:"Calimero allows users to authenticate via their Starknet wallet, ensuring secure\naccess to the Admin Dashboard. The process of logging in with a Starknet wallet\ninvolves the following steps:"}),"\n",(0,s.jsx)(n.h3,{id:"1-user-initiates-login",children:"1. User Initiates Login"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'The user navigates to the Admin Dashboard and selects the option to "Login\nwith Starknet."'}),"\n",(0,s.jsx)(n.li,{children:"They are presented with two wallet options: ArgentX and Metamask Snap."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2-wallet-selection",children:"2. Wallet Selection"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The user chooses their preferred wallet: ArgentX or Metamask Snap."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-wallet-connection",children:"3. Wallet Connection"}),"\n",(0,s.jsx)(n.h4,{id:"for-argentx",children:"For ArgentX:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"If ArgentX is installed, the user is prompted to connect their wallet."}),"\n",(0,s.jsx)(n.li,{children:"If not installed, the user is directed to install the ArgentX browser\nextension."}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"for-metamask-snap",children:"For Metamask Snap:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"If Metamask with Starknet Snap is installed, the user is prompted to connect."}),"\n",(0,s.jsx)(n.li,{children:"If not installed, the user is guided to install Metamask and the Starknet\nSnap."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"4-server-issues-challenge",children:"4. Server Issues Challenge"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Upon selecting the wallet, the server generates a challenge. This challenge is\nthen presented to the user for signing."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"5-user-signs-challenge",children:"5. User Signs Challenge"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The user is prompted to sign the server-issued challenge using their selected\nStarknet wallet."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"6-signature-sent-to-backend",children:"6. Signature Sent to Backend"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"After the user signs the challenge, the signature is sent back to the server\nfor verification."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"7-signature-verification",children:"7. Signature Verification"}),"\n",(0,s.jsx)(n.p,{children:"The backend verifies the signature to ensure its authenticity using a process\ntailored to Starknet's cryptographic standards. This verification process\ndiffers depending on whether the user is using ArgentX or Metamask Snap."}),"\n",(0,s.jsx)(n.h4,{id:"for-argentx-wallets",children:"For ArgentX Wallets:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"On-Chain Verification"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The signature is initially verified on-chain using the Starknet network."}),"\n",(0,s.jsxs)(n.li,{children:["A JSON-RPC call is made to the Starknet node, invoking the\n",(0,s.jsx)(n.code,{children:"isValidSignature"})," function on the user's wallet contract."]}),"\n",(0,s.jsx)(n.li,{children:"This on-chain verification ensures the signature's validity according to\nthe wallet's implementation."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Message Hash Verification"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"If the on-chain verification succeeds, an additional verification of the\nmessage hash is performed off-chain."}),"\n",(0,s.jsx)(n.li,{children:"This step ensures the integrity of the signed message and prevents any\ntampering."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"for-metamask-snap-1",children:"For Metamask Snap:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Off-Chain Verification"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The signature is verified off-chain using Starknet's cryptographic\nlibraries."}),"\n",(0,s.jsxs)(n.li,{children:["This involves using the ",(0,s.jsx)(n.code,{children:"verify"})," function from the ",(0,s.jsx)(n.code,{children:"starknet_crypto"}),"\nlibrary to check the signature against the provided public key."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Message Hash Verification"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"If the signature is valid, an additional verification of the message hash\nis performed."}),"\n",(0,s.jsx)(n.li,{children:"This ensures the integrity of the signed message, similar to the ArgentX\nprocess."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"final-steps",children:"Final Steps:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"If the signature and hash are valid, the user's Starknet address is extracted\nfrom the wallet address used in the verification process."}),"\n",(0,s.jsx)(n.li,{children:"This address serves as the user's Decentralized Identifier (DID), enabling\ndecentralized authentication across different contexts and applications."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"8-successful-login",children:"8. Successful Login"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Once verified, the user is successfully logged into the Admin Dashboard, with\ntheir Starknet address (DID) serving as their user ID for future interactions."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This login flow ensures a secure and seamless authentication process leveraging\nStarknet's robust blockchain-based security."})]})}function d(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);