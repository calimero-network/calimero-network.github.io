"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7158],{83545:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var r=s(30758);const t={},i=r.createContext(t);function o(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(i.Provider,{value:n},e.children)}},96356:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>m,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"getting-started/run-as-systemd-service","title":"Run as a systemd service","description":"When you want your Calimero node to run continuously on a server or system, you","source":"@site/docs/02-getting-started/04-run-as-systemd-service.mdx","sourceDirName":"02-getting-started","slug":"/getting-started/run-as-systemd-service","permalink":"/getting-started/run-as-systemd-service","draft":false,"unlisted":false,"editUrl":"https://github.com/calimero-network/calimero-network.github.io/edit/master/docs/02-getting-started/04-run-as-systemd-service.mdx","tags":[],"version":"current","lastUpdatedAt":1759335963000,"sidebarPosition":4,"frontMatter":{"id":"run-as-systemd-service","title":"Run as a systemd service"},"sidebar":"tutorialSidebar","previous":{"title":"Build From Source","permalink":"/getting-started/build-from-source"},"next":{"title":"Terminology","permalink":"/core-concepts/terminology"}}');var t=s(86070),i=s(83545);const o={id:"run-as-systemd-service",title:"Run as a systemd service"},a="Run as a systemd service",c={},l=[{value:"Create systemd service file",id:"create-systemd-service-file",level:2},{value:"Create dedicated user (recommended)",id:"create-dedicated-user-recommended",level:2},{value:"Set up the service",id:"set-up-the-service",level:2},{value:"Service management commands",id:"service-management-commands",level:2},{value:"Configuration considerations",id:"configuration-considerations",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"run-as-a-systemd-service",children:"Run as a systemd service"})}),"\n",(0,t.jsx)(n.p,{children:"When you want your Calimero node to run continuously on a server or system, you\ncan set it up as a systemd service. This ensures automatic startup, restart on\nfailure, and proper logging."}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"This guide assumes you're using the packaged Calimero installation. For systemd\nservices, packaged binaries are recommended over building from source."})}),"\n",(0,t.jsx)(n.h2,{id:"create-systemd-service-file",children:"Create systemd service file"}),"\n",(0,t.jsx)(n.p,{children:"Create a new systemd service file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Terminal"',children:"sudo nano /etc/systemd/system/calimero-node.service\n"})}),"\n",(0,t.jsx)(n.p,{children:"Add the following content (adjust paths and node name as needed):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",metastring:'title="/etc/systemd/system/calimero-node.service"',children:"[Unit]\nDescription=Calimero Node Service\nAfter=network.target\nWants=network.target\n\n[Service]\nType=simple\nUser=calimero\nGroup=calimero\nWorkingDirectory=/home/calimero\nExecStart=/usr/local/bin/merod --node-name node1 run\nRestart=always\nRestartSec=10\nStandardOutput=journal\nStandardError=journal\nSyslogIdentifier=calimero-node\n\n# Security settings\nNoNewPrivileges=true\nPrivateTmp=true\nProtectSystem=strict\nProtectHome=true\nReadWritePaths=/home/calimero/.calimero\n\n# Resource limits\nLimitNOFILE=65536\nLimitNPROC=4096\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["The default path ",(0,t.jsx)(n.code,{children:"/usr/local/bin/merod"})," assumes a standard packaged\ninstallation. If you installed Calimero to a different location, adjust the\n",(0,t.jsx)(n.code,{children:"ExecStart"})," path accordingly."]})}),"\n",(0,t.jsx)(n.h2,{id:"create-dedicated-user-recommended",children:"Create dedicated user (recommended)"}),"\n",(0,t.jsx)(n.p,{children:"For security, create a dedicated user to run the Calimero service:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Terminal"',children:"sudo useradd -r -s /bin/false -d /home/calimero calimero\nsudo mkdir -p /home/calimero/.calimero\nsudo chown -R calimero:calimero /home/calimero/.calimero\n"})}),"\n",(0,t.jsx)(n.h2,{id:"set-up-the-service",children:"Set up the service"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Reload systemd configuration:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Terminal"',children:"sudo systemctl daemon-reload\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Enable the service to start on boot:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Terminal"',children:"sudo systemctl enable calimero-node.service\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Start the service:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Terminal"',children:"sudo systemctl start calimero-node.service\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Check service status:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Terminal"',children:"sudo systemctl status calimero-node.service\n"})}),"\n",(0,t.jsx)(n.h2,{id:"service-management-commands",children:"Service management commands"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Terminal"',children:'# Stop the service\nsudo systemctl stop calimero-node.service\n\n# Restart the service\nsudo systemctl restart calimero-node.service\n\n# View logs\nsudo journalctl -u calimero-node.service -f\n\n# View recent logs\nsudo journalctl -u calimero-node.service --since "1 hour ago"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"configuration-considerations",children:"Configuration considerations"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Ports"}),": Ensure the ports specified in your node configuration (default:\n2428 for server, 2528 for swarm) are open in your firewall"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Storage"}),": The service will store data in ",(0,t.jsx)(n.code,{children:"/home/calimero/.calimero/"})," by\ndefault"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Logs"}),": All logs are captured by systemd journald and can be viewed with\n",(0,t.jsx)(n.code,{children:"journalctl"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Updates"}),": When updating Calimero, restart the service with\n",(0,t.jsx)(n.code,{children:"sudo systemctl restart calimero-node.service"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.p,{children:"If the service fails to start, check:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Service status:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Terminal"',children:"sudo systemctl status calimero-node.service\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Detailed logs:"})}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Terminal"',children:"sudo journalctl -u calimero-node.service -n 50\n"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Common issues:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Permission errors: Ensure the ",(0,t.jsx)(n.code,{children:"calimero"})," user owns the ",(0,t.jsx)(n.code,{children:".calimero"}),"\ndirectory"]}),"\n",(0,t.jsxs)(n.li,{children:["Port conflicts: Check if ports are already in use with\n",(0,t.jsx)(n.code,{children:"netstat -tulpn | grep :2428"})]}),"\n",(0,t.jsxs)(n.li,{children:["Configuration errors: Verify your ",(0,t.jsx)(n.code,{children:"config.toml"})," file is valid"]}),"\n",(0,t.jsxs)(n.li,{children:["Binary path: Ensure the path in ",(0,t.jsx)(n.code,{children:"ExecStart"})," points to your ",(0,t.jsx)(n.code,{children:"merod"})," binary\n(usually ",(0,t.jsx)(n.code,{children:"/usr/local/bin/merod"})," for packaged installations)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsx)(n.p,{children:"For server environments, consider using a reverse proxy (like nginx) in front of\nyour Calimero node and implementing proper SSL/TLS termination."})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"The systemd service configuration above is optimized for security and\nreliability. Adjust the paths, user, and resource limits according to your\nspecific environment and requirements."})})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);