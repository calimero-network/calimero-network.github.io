"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4420],{7331:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"developer-tools/SDK/client-sdk/client-ts-sdk","title":"TypeScript Client SDK","description":"Getting Started with Calimero SDK for Typescript","source":"@site/docs/05-developer-tools/02-SDK/04-client-sdk/calimero-client-js.mdx","sourceDirName":"05-developer-tools/02-SDK/04-client-sdk","slug":"/developer-tools/SDK/client-sdk/client-ts-sdk","permalink":"/developer-tools/SDK/client-sdk/client-ts-sdk","draft":false,"unlisted":false,"editUrl":"https://github.com/calimero-network/calimero-network.github.io/edit/master/docs/05-developer-tools/02-SDK/04-client-sdk/calimero-client-js.mdx","tags":[],"version":"current","lastUpdatedAt":1733921596000,"frontMatter":{"id":"client-ts-sdk","title":"TypeScript Client SDK"},"sidebar":"tutorialSidebar","previous":{"title":"Rust Protocol SDK","permalink":"/developer-tools/SDK/protocol-sdk/protocol-rs-sdk"},"next":{"title":"Admin Dashboard","permalink":"/developer-tools/apps/admin-dashboard"}}');var s=t(6070),o=t(4214);const r={id:"client-ts-sdk",title:"TypeScript Client SDK"},c=void 0,a={},l=[{value:"Getting Started with Calimero SDK for Typescript",id:"getting-started-with-calimero-sdk-for-typescript",level:2},{value:"Components",id:"components",level:3},{value:"RpcClient interface",id:"rpcclient-interface",level:4},{value:"SubscriptionsClient",id:"subscriptionsclient",level:4},{value:"Examples",id:"examples",level:3},{value:"JsonRpcClient",id:"jsonrpcclient",level:4},{value:"WsSubscriptionsClient",id:"wssubscriptionsclient",level:4}];function p(e){const n={code:"code",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"getting-started-with-calimero-sdk-for-typescript",children:"Getting Started with Calimero SDK for Typescript"}),"\n",(0,s.jsx)(n.p,{children:"Our TypeScript Client SDK is a powerful tool designed to simplify the process of\ninteracting with decentralized peer-to-peer applications installed on the node.\nIt serves as an efficient conduit for communication between the client and the\nnode\u2019s server. This SDK is particularly beneficial for developers as it\nabstracts the complexities of server communication, allowing them to concentrate\non the core application logic."}),"\n",(0,s.jsx)(n.p,{children:"The SDK is built with the modern features of TypeScript, a language that is\ngaining popularity for its static typing and advanced capabilities. By using our\nSDK, developers can write applications in TypeScript, and the SDK takes care of\nthe rest. It handles all the interactions with the server, making the\ndevelopment process more streamlined and efficient."}),"\n",(0,s.jsx)(n.p,{children:"This not only enhances the overall development experience but also accelerates\nthe deployment of innovative decentralized applications on our network. In\nessence, our TypeScript SDK is a comprehensive solution that makes building and\ninteracting with decentralized applications a breeze. It\u2019s all about making the\ndevelopment process more enjoyable and productive for developers worldwide."}),"\n",(0,s.jsx)(n.h3,{id:"components",children:"Components"}),"\n",(0,s.jsxs)(n.p,{children:["Our TypeScript Client SDK is composed of two main components: ",(0,s.jsx)(n.code,{children:"RpcClient"})," and\n",(0,s.jsx)(n.code,{children:"SubscriptionsClient"}),". Each of these components has an interface and a class\nthat implements the interface. The ",(0,s.jsx)(n.code,{children:"RpcClient"})," interface is implemented by the\n",(0,s.jsx)(n.code,{children:"JsonRpcClient"})," class, and the ",(0,s.jsx)(n.code,{children:"SubscriptionsClient"})," interface is implemented by\nthe ",(0,s.jsx)(n.code,{children:"WsSubscriptionsClient"})," class."]}),"\n",(0,s.jsx)(n.p,{children:"These components are designed with flexibility and future growth in mind. While\ncurrently there is only one implementation of each interface, we anticipate\nmultiple implementations in the future. This is because our server will have\nmultiple implementations of both the Rpc server and the Subscriptions server.\nThis design allows us to easily add new classes that implement these interfaces\nas our server capabilities expand."}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"RpcClient"})," and ",(0,s.jsx)(n.code,{children:"SubscriptionsClient"})," interfaces define a standard set of\nmethods that all implementations must provide. This ensures consistency across\ndifferent implementations, making it easier for developers to switch between\ndifferent Rpc and Subscriptions servers as needed."]}),"\n",(0,s.jsx)(n.p,{children:"By designing our SDK in this way, we ensure that it remains flexible, scalable,\nand easy to use, regardless of how our server implementations evolve in the\nfuture."}),"\n",(0,s.jsx)(n.h4,{id:"rpcclient-interface",children:"RpcClient interface"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"export interface RpcClient {\n  query<Args, Output>(\n    params: RpcQueryParams<Args>,\n    config?: RequestConfig,\n  ): Promise<RpcQueryResponse<Output>>;\n  mutate<Args, Output>(\n    params: RpcMutateParams<Args>,\n    config?: RequestConfig,\n  ): Promise<RpcMutateResponse<Output>>;\n}\n\nexport interface RequestConfig {\n  timeout?: number;\n}\n\nexport interface RpcQueryParams<Args> {\n  applicationId: ApplicationId;\n  method: string;\n  argsJson: Args;\n}\n\nexport interface RpcQueryResponse<Output> {\n  output?: Output;\n}\n\nexport interface RpcMutateParams<Args> {\n  applicationId: ApplicationId;\n  method: string;\n  argsJson: Args;\n}\n\nexport interface RpcMutateResponse<Output> {\n  output?: Output;\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"subscriptionsclient",children:"SubscriptionsClient"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"export interface SubscriptionsClient {\n  connect(connectionId?: string): Promise<void>;\n  disconnect(connectionId?: string): void;\n  subscribe(contextIds: string[], connectionId?: string): void;\n  unsubscribe(contextIds: string[], connectionId?: string): void;\n  addCallback(\n    callback: (event: NodeEvent) => void,\n    connectionId?: string,\n  ): void;\n  removeCallback(\n    callback: (event: NodeEvent) => void,\n    connectionId?: string,\n  ): void;\n}\n\nexport type NodeEvent = ContextEvent;\n\nexport type ContextEvent = ContextEventPayload & {\n  contextId: ContextId;\n};\n\ntype ContextEventPayload =\n  | {\n      type: 'StateMutation';\n      data: StateMutation;\n    }\n  | {\n      type: 'ExecutionEvent';\n      data: ExecutionEvent;\n    };\n\nexport interface StateMutation {\n  newRoot: string;\n}\n\nexport interface ExecutionEvent {\n  kind: string;\n  data: any;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,s.jsx)(n.h4,{id:"jsonrpcclient",children:"JsonRpcClient"}),"\n",(0,s.jsx)(n.p,{children:"Here's an example of how to use it:"}),"\n",(0,s.jsx)(n.p,{children:"Define application endpoint and application id. You can find application id in\nthe Admin Dashboard -> Contexts -> select application id from the context where\nyour app logic is installed"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'NEXT_PUBLIC_API_URL=http://localhost:{NODE_PORT}\nNEXT_PUBLIC_APPLICATION_ID="my-application-id"\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'// Import the necessary classes and interfaces from the SDK\nimport {\n  RpcClient,\n  JsonRpcClient,\n  RpcMutateParams,\n  RpcMutateResponse,\n} from "@calimero-is-near/calimero-p2p-sdk";\n\n// Define the Args and Output interfaces\ninterface CreatePost {\n  title: string;\n  text: string;\n}\n\ninterface Post {\n  id: string;\n  title: string;\n  text: string;\n}\n\n// Create an instance of JsonRpcClient\nconst rpcClient: RpcClient = new JsonRpcClient(\n    process.env["NEXT_PUBLIC_API_URL],\n    "/jsonrpc"\n);\n\n// Define the parameters for the mutate\nconst params: RpcMutateParams<CreatePost> = {\n    applicationId: process.env["NEXT_PUBLIC_APPLICATION_ID"],\n    method: "create_post",\n    argsJson: {\n    title: "My First Post",\n    text: "This is my first post using the TypeScript Client SDK",\n    },\n};\n\n// Use the execute method\nconst respone: RpcMutateResponse<Post> = await rpcClient.execute<\nCreatePost,\nPost\n\n> (params);\n\nconsole.log(response);\n\n'})}),"\n",(0,s.jsx)(n.h4,{id:"wssubscriptionsclient",children:"WsSubscriptionsClient"}),"\n",(0,s.jsx)(n.p,{children:"Here's an example of how to use it:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'// Import the necessary classes and interfaces from the SDK\nimport {\n  SubscriptionsClient,\n  WsSubscriptionsClient,\n  NodeEvent,\n} from "@calimero-is-near/calimero-p2p-sdk";\n\n// Create an instance of WsSubscriptionsClient\nconst subscriptionsClient: SubscriptionsClient = new WsSubscriptionsClient(\n  process.env["NEXT_PUBLIC_API_URL],\n  "/ws"\n);\n\n// Create (default) connection to the server\nawait subscriptionsClient.connect();\n\n// Subscribe to an application events\nsubscriptionsClient.subscribe([process.env["NEXT_PUBLIC_APPLICATION_ID"]]);\n\n// Add a callback to process messages\nsubscriptionsClient.addCallback((data: NodeEvent) => {\n  console.log(data);\n});\n'})})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},4214:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var i=t(758);const s={},o=i.createContext(s);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);