---
title: Merobox CLI
description:
  A comprehensive Python CLI tool for managing Calimero nodes in Docker
  containers with advanced workflow automation.
sidebar_position: 5
---

# Merobox CLI

Merobox is a powerful Python CLI tool designed to simplify the management of
Calimero nodes in Docker containers. It provides comprehensive automation
capabilities for node lifecycle management, application deployment, context
management, and complex workflow orchestration.

## Overview

Merobox streamlines the development and testing process by providing:

- **Docker-based Node Management**: Easily spin up and manage multiple Calimero
  nodes in isolated Docker containers
- **Workflow Automation**: Define complex multi-step workflows using YAML
  configuration files
- **Application Management**: Install and manage applications across multiple
  nodes
- **Context Orchestration**: Create, invite, and join contexts with automated
  identity management
- **Testing Integration**: Built-in support for testing frameworks and assertion
  validation
- **Dynamic Value Capture**: Capture and reuse values between workflow steps

## Key Features

### Node Management

- Start, stop, and manage multiple Calimero nodes
- Automatic port management and conflict resolution
- Custom Docker image support with force-pull capabilities
- Authentication service integration with Traefik proxy
- Health monitoring and status checking

### Workflow System

- **YAML-based Configuration**: Define complex workflows in simple YAML files
- **Step Types**: Support for various step types including:
  - `install_application`: Install WASM applications on nodes
  - `create_context`: Create new contexts with applications
  - `create_identity`: Generate identities for nodes
  - `invite_identity`: Invite identities to join contexts
  - `join_context`: Join contexts from different nodes
  - `call`: Execute contract calls and view methods
  - `wait`: Add delays between steps
  - `repeat`: Repeat operations multiple times
  - `script`: Execute custom scripts
  - `assert`: Validate conditions and outputs

### Dynamic Value Management

- **Output Capture**: Capture values from any step for use in subsequent steps
- **Template Variables**: Use `{{variable_name}}` syntax to reference captured
  values
- **Cross-Step Communication**: Share data between different workflow steps
  seamlessly

### Testing and Validation

- **Assertion Framework**: Built-in support for validating step outputs
- **JSON Assertions**: Validate JSON responses with flexible matching
- **Integration Testing**: Complete testing framework for Calimero applications
- **Custom Scripts**: Execute pre/post scripts for setup and cleanup

## Installation

Merobox is available as a Python package and can be installed via pip:

```bash
pip install merobox
```

### Prerequisites

- Python 3.8 or higher
- Docker and Docker Compose
- Git (for cloning repositories)

### Docker Images

Merobox uses the following default Docker images:

- **Node Image**: `ghcr.io/calimero-network/merod:edge`
- **Auth Service**: `ghcr.io/calimero-network/mero-auth:edge`

## Quick Start

### Basic Node Management

Start a single Calimero node:

```bash
merobox run
```

Start multiple nodes with custom configuration:

```bash
merobox run --count 3 --chain-id testnet-1 --prefix my-nodes
```

### Workflow Execution

Run a workflow from a YAML file:

```bash
merobox bootstrap workflow-example.yml
```

### Node Operations

List running nodes:

```bash
merobox list
```

Check node health:

```bash
merobox health
```

Stop all nodes:

```bash
merobox stop
```

## Workflow Configuration

Merobox workflows are defined in YAML files with the following structure:

```yaml
description: 'Workflow description'
name: 'Workflow Name'

# Node configuration
nodes:
  chain_id: testnet-1
  count: 2
  image: ghcr.io/calimero-network/merod:edge
  prefix: calimero-node

# Workflow steps
steps:
  - name: 'Step Name'
    type: step_type
    node: calimero-node-1
    # Step-specific parameters
    outputs:
      variable_name: field_name # Capture output for later use

# Global configuration
stop_all_nodes: false
restart: false
wait_timeout: 60
```

### Example Workflow

Here's a complete example that demonstrates Merobox's capabilities:

```yaml
description: 'Complete Calimero Application Workflow'
name: 'Application Deployment and Testing'

nodes:
  chain_id: testnet-1
  count: 2
  image: ghcr.io/calimero-network/merod:edge
  prefix: calimero-node

steps:
  # Install application on first node
  - name: Install Application
    type: install_application
    node: calimero-node-1
    path: ./my-app.wasm
    dev: true
    outputs:
      app_id: applicationId

  # Create context with the application
  - name: Create Context
    type: create_context
    node: calimero-node-1
    application_id: '{{app_id}}'
    outputs:
      context_id: contextId
      member_key: memberPublicKey

  # Create identity on second node
  - name: Create Identity
    type: create_identity
    node: calimero-node-2
    outputs:
      identity_key: publicKey

  # Invite second node to context
  - name: Invite Node
    type: invite_identity
    node: calimero-node-1
    context_id: '{{context_id}}'
    grantee_id: '{{identity_key}}'
    granter_id: '{{member_key}}'
    capability: member
    outputs:
      invitation: invitation

  # Join context from second node
  - name: Join Context
    type: join_context
    node: calimero-node-2
    context_id: '{{context_id}}'
    invitee_id: '{{identity_key}}'
    invitation: '{{invitation}}'

  # Execute contract calls
  - name: Set Value
    type: call
    node: calimero-node-1
    context_id: '{{context_id}}'
    executor_public_key: '{{member_key}}'
    method: set
    args:
      key: hello
      value: world

  - name: Get Value
    type: call
    node: calimero-node-2
    context_id: '{{context_id}}'
    executor_public_key: '{{identity_key}}'
    method: get
    args:
      key: hello
    outputs:
      result: result
```

## Command Reference

### Core Commands

- `merobox run` - Start Calimero nodes
- `merobox stop` - Stop running nodes
- `merobox list` - List running nodes
- `merobox health` - Check node health status
- `merobox logs` - View node logs
- `merobox nuke` - Remove all containers and data

### Application Commands

- `merobox install` - Install applications on nodes
- `merobox call` - Execute contract calls

### Identity and Context Commands

- `merobox identity` - Manage identities
- `merobox join` - Join contexts

### Workflow Commands

- `merobox bootstrap` - Execute workflow files

## Integration with Development

Merobox is designed to integrate seamlessly with your development workflow:

- **Local Development**: Test applications locally with multiple nodes
- **CI/CD Integration**: Automate testing in continuous integration pipelines
- **Application Testing**: Comprehensive testing of Calimero applications
- **Multi-Node Scenarios**: Test complex multi-node interactions

## Documentation

### Getting Started

- [Installation and Setup](./merobox/installation) - Complete setup guide
- [Node Management](./merobox/node-management) - Managing Calimero nodes
- [Workflow System](./merobox/workflows) - Creating and running workflows

### Advanced Topics

- [Examples and Tutorials](./merobox/examples) - Practical examples and
  tutorials
- [Advanced Configuration](./merobox/advanced-configuration) - Advanced features
  and customization
- [Troubleshooting](./merobox/troubleshooting) - Common issues and solutions

## Resources

- [Merobox GitHub Repository](https://github.com/calimero-network/merobox)
- [Example Workflows](https://github.com/calimero-network/merobox/tree/main/workflow-examples)
- [Python Testing Framework](https://github.com/calimero-network/merobox/tree/main/example-project)
